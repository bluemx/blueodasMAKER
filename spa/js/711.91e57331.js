"use strict";(self["webpackChunkblueodasmaker"]=self["webpackChunkblueodasmaker"]||[]).push([[711],{6711:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ce});var a=l(59835),o=l(86970);const r={class:"text-caption text-bold"},s=(0,a.Uk)("Avanzada"),i=(0,a.Uk)("Versión ODAS MAKER"),u=(0,a.Uk)("Versión ODA"),d=(0,a.Uk)("Añadir módulo"),n={style:{width:"400px"}},c={class:"bg-white rounded-borders q-pa-sm q-ma-xs"},m=(0,a._)("div",{class:"row col-grow"},null,-1),p=(0,a.Uk)("Reiniciar"),v={class:"row full-height"},w={class:"col-2 full-height q-py-md q-px-xs"},f={class:"col-3 full-height q-py-md q-px-xs"},b={class:"col full-height q-py-md q-px-xs row column"};function g(e,t,l,g,h,_){const y=(0,a.up)("q-drawer"),q=(0,a.up)("q-tooltip"),k=(0,a.up)("q-badge"),M=(0,a.up)("q-toolbar-title"),W=(0,a.up)("q-btn"),T=(0,a.up)("q-menu"),x=(0,a.up)("q-select"),H=(0,a.up)("q-toolbar"),Z=(0,a.up)("q-header"),A=(0,a.up)("q-page-container"),P=(0,a.up)("q-layout"),V=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(P,{view:"lhh lpR lff"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"bg-transparent q-pa-sm",modelValue:g.mediadrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>g.mediadrawer=e),overlay:"",behavior:"mobile"},{default:(0,a.w5)((()=>[(0,a.Wm)(g["MediaManager"])])),_:1},8,["modelValue"]),(0,a.Wm)(Z,{class:"q-ma-sm bg-transparent"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{class:"shadow-0 bg-blue-grey-10 text-white rounded-borders",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[(0,a._)("div",r,[s,(0,a.Wm)(k,{class:"q-ml-xs",size:"xs",color:"pink"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(g.oda.structure.version),1),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[i])),_:1})])),_:1}),(0,a.Wm)(k,{class:"q-ml-xs",size:"xs",color:"grey"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(g.oda.structure.loaderVersion),1),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[u])),_:1})])),_:1})])])),_:1}),(0,a.Wm)(W,{icon:"perm_media",size:"md",round:"",flat:"",color:"blue",onClick:t[1]||(t[1]=e=>g.mediadrawer=!g.mediadrawer)}),(0,a.Wm)(W,{icon:"add_circle",size:"md",round:"",flat:"",color:"red"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(T,{class:"bg-grey-100",onHide:g.updatePreview},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",c,[(0,a.Wm)(g["ModulesPicker"],{onAdd:g.add})])])])),_:1})])),_:1}),(0,a.Wm)(x,{"bg-color":"white",modelValue:g.oda.structure.platform,"onUpdate:modelValue":t[2]||(t[2]=e=>g.oda.structure.platform=e),label:"Plataforma",options:["ASOMATE-ESP","ASOMATE-MAT","RAP-ESP","RAP-MAT","MDA"],dense:"",outlined:"","options-dense":""},null,8,["modelValue"]),m,(0,a.Wm)(W,{icon:"power_settings_new",size:"md",round:"",flat:"",color:"red",onClick:g.reset},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[p])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(A,{class:"window-height"},{default:(0,a.w5)((()=>[(0,a._)("div",v,[(0,a._)("div",w,[(0,a.Wm)(g["ModulesLayers"])]),(0,a._)("div",f,[Object.entries(g.oda.activeModule).length>0?((0,a.wg)(),(0,a.j4)(g["ModuleProperties"],{key:g.oda.activeModule.id})):(0,a.kq)("",!0)]),(0,a._)("div",b,[(0,a.Wm)(g["AvanzadasHTML"])])])])),_:1})])),_:1})])),_:1})}var h=l(60499),_=l(61957);const y={class:"row column full-height bg-blue-grey-1 rounded-borders q-px-xs q-pb-xs"},q={class:"col-grow"},k={class:"row column full-height"},M={class:"row full-width items-center"},W=(0,a._)("div",{class:"col-6 text-caption"},"Vista previa",-1),T={class:"col-6 text-right"},x=(0,a.Uk)("Ver código"),H=(0,a.Uk)("Responsivo"),Z=(0,a.Uk)("Actualizar"),A={class:"col-grow text-center"},P={class:"col-grow bg-white"};function V(e,t,l,r,s,i){const u=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn"),n=(0,a.up)("q-toolbar");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",q,[(0,a._)("div",k,[(0,a.Wm)(n,{class:"bg-blue-grey-10 col-1 rounded-borders text-white"},{default:(0,a.w5)((()=>[(0,a._)("div",M,[W,(0,a._)("div",T,[(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-2",icon:r.oda.structure.view?"dvr":"html",onClick:r.changeview,size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[x])),_:1})])),_:1},8,["icon"]),(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-3",icon:"devices",onClick:t[0]||(t[0]=e=>r.responsiveView=!r.responsiveView),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[H])),_:1})])),_:1}),(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",color:"purple-4",icon:"las la-sync",onClick:r.resync,size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[Z])),_:1})])),_:1}),(0,a.Wm)(r["HTML_download"],{onDownloading:t[1]||(t[1]=e=>r.downloading=e),onResync:t[2]||(t[2]=e=>r.resync()),iframe:r.iframe},null,8,["iframe"])])])])),_:1}),(0,a.wy)((0,a._)("div",A,[r.insync?((0,a.wg)(),(0,a.iD)("iframe",{key:0,class:(0,o.C_)(["rounded-borders bg-white",r.responsiveView?"responsiveView full-height q-mx-auto":"fit"]),ref:"iframe",style:{border:"none"}},null,2)):(0,a.kq)("",!0)],512),[[_.F8,!r.oda.structure.view]]),(0,a.wy)((0,a._)("div",P,[(0,a.Wm)(r["HTML_viewcode"],{"html-modules":r.htmlModules},null,8,["html-modules"])],512),[[_.F8,r.oda.structure.view]])])])])}l(40702);var z=l(37457),Q=l(71184),S=l(46420),L=l(18186);const O={setup(e,{expose:t}){t();const l=(0,h.iH)(0),o=(0,h.iH)(!1),r=(0,h.iH)("loading..."),s=(0,a.f3)("EMITTER"),i=(0,h.iH)(null),u=(0,h.iH)(null),d=(0,z.k)(),n=(0,h.iH)(),c=(0,h.iH)(),m=(0,h.iH)(!0),p=(0,h.iH)(!1),v=(0,h.iH)([]),w=()=>{d.structure.view=!d.structure.view},f=async()=>{l.value=u.value.body.scrollTop,d.buildLocations(),m.value=!1,setTimeout((()=>{m.value=!0,setTimeout((()=>{b()}),100)}),100)};s.on("updatePreview",(e=>f()));const b=()=>{const e=d.structure.data.filter((e=>1==e.active));r.value=(0,Q.Json2Html)(e),u.value=i.value.contentWindow.document,u.value.body.setAttribute("data",d.structure.platform),u.value.body.setAttribute("class","bg-beige h-full"),y("meta",[["charset","UTF-8"]],!1,u.value.head),y("meta",[["name","viewport"],["content","width=device-width, initial-scale=1.0"]],!1,u.value.head),y("title",[],d.structure.title,u.value.head),n.value=y("div",[["class","mx-auto h-full"],["id","app"]],!1,u.value.body);let t="text/javascript";p.value&&(t="text/test"),y("script",[["src",d.structure.loader],["data-loader-version",d.structure.loaderVersion],["type",t]],!1,u.value.body),_()},g=e=>{let t=e,l=[];for(const a in t){let e=t[a];if("object"==typeof e){let t="";Object.keys(e).map(((l,a)=>{t+=" "+e[l]})),e=t}l.push([a,e])}return l},_=()=>{c.value=y("div",[],!1,n.value),c.value.innerHTML=r.value,setTimeout((()=>{i.value.contentWindow.scrollTo(0,l.value)}),200)},y=(e,t,l,a)=>{let o=u.value.createElement(e);for(let r of t)o.setAttribute(r[0],r[1]);return l&&(o.innerHTML+=l),a.appendChild(o),o},q=(e,t,l,a)=>{let o=u.value.createElement(e);for(let r of t)o.setAttribute(r[0],r[1]);return l&&l.map(((e,t)=>{let a=l[t];a&&("string"==typeof a?o.innerHTML+=a:a&&null!=a.data&&k(o,a.data))})),v.value.push(o),a.appendChild(o),o},k=(e,t)=>{q(t.tag,g(t.attrs),t.content,e)};(0,a.bv)((()=>{b()}));const M={currentScroll:l,responsiveView:o,htmlModules:r,emitter:s,iframe:i,iDoc:u,oda:d,appcontainer:n,modulescontainer:c,insync:m,downloading:p,htmlbody:v,changeview:w,resync:f,build:b,modulateAttributes:g,buildModules:_,createTag:y,createModule:q,createModuleInside:k,ref:h.iH,onMounted:a.bv,inject:a.f3,useOdaAvanzadaStore:z.k,Json2Html:Q.Json2Html,HTML_viewcode:S.Z,HTML_download:L.Z};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}};var U=l(11639),j=l(51663),C=l(24455),E=l(46858),R=l(69984),D=l.n(R);const J=(0,U.Z)(O,[["render",V]]),B=J;D()(O,"components",{QToolbar:j.Z,QBtn:C.Z,QTooltip:E.Z});var F=l(21239),I=l(89532),N=l(50796),K=l(19302),X=l(82322),Y=l(65451),$=l(24409),G=l(3967);const ee={setup(e,{expose:t}){t();const l=(0,a.f3)("EMITTER"),o=(0,z.k)(),r=(0,K.Z)(),s=(0,h.iH)(!1),i=e=>{const t=JSON.parse(JSON.stringify(e));let l=(0,N.Z)().split("-");t.id=Object.keys(o.structure.data).length+l[0],o.structure.data.push(t),o.buildLocations()},u=()=>{l.emit("updatePreview",{})},d=()=>{r.dialog({title:"¿Reiniciar oda?",message:"No se podrá recuperar",cancel:!0}).onOk((()=>{o.reset(),location.reload()}))},n={emitter:l,oda:o,$q:r,mediadrawer:s,add:i,updatePreview:u,reset:d,ref:h.iH,provide:a.JJ,inject:a.f3,nextTick:a.Y3,AvanzadasHTML:B,ModulesLayers:F.Z,useOdaAvanzadaStore:z.k,ModulesPicker:I.Z,uid:N.Z,useQuasar:K.Z,MediaManager:X.Z,ModuleProperties:Y.Z,cloneDeep:$.cloneDeep,useRefHistory:G.x9X};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}};var te=l(69885),le=l(20249),ae=l(10906),oe=l(16602),re=l(81973),se=l(20990),ie=l(56362),ue=l(5698),de=l(12133);const ne=(0,U.Z)(ee,[["render",g]]),ce=ne;D()(ee,"components",{QPage:te.Z,QLayout:le.Z,QDrawer:ae.Z,QHeader:oe.Z,QToolbar:j.Z,QToolbarTitle:re.Z,QBadge:se.Z,QTooltip:E.Z,QBtn:C.Z,QMenu:ie.Z,QSelect:ue.Z,QPageContainer:de.Z})}}]);