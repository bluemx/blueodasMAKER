"use strict";(self["webpackChunkblueodasmaker"]=self["webpackChunkblueodasmaker"]||[]).push([[33],{4033:(e,a,t)=>{t.r(a),t.d(a,{default:()=>qe});var l=t(59835),o=t(86970);const i={style:{"font-size":"6px",position:"absolute",top:"2px",left:"2px",color:"#fff",opacity:"0.8"}},n={class:"text-caption text-bold"},s=(0,l.Uk)("Avanzada"),r=(0,l.Uk)("Versión ODAS MAKER"),d=(0,l.Uk)("Versión ODA"),u=(0,l.Uk)("Añadir módulo"),c={style:{width:"300px"}},m={class:"bg-white rounded-borders q-pa-sm q-ma-xs"},p=(0,l._)("div",{class:"row col-grow"},null,-1),v=(0,l.Uk)("Reiniciar"),f={class:"row full-height"},w={class:"col-2 full-height q-py-md q-px-xs"},b={class:"col-3 full-height q-py-md q-px-xs"},g={class:"col full-height q-py-md q-px-xs row column"};function h(e,a,t,h,_,y){const z=(0,l.up)("q-drawer"),k=(0,l.up)("q-tooltip"),q=(0,l.up)("q-badge"),x=(0,l.up)("q-toolbar-title"),M=(0,l.up)("q-btn"),T=(0,l.up)("q-menu"),W=(0,l.up)("q-select"),Z=(0,l.up)("q-toolbar"),A=(0,l.up)("q-header"),H=(0,l.up)("q-page-container"),Q=(0,l.up)("q-layout"),S=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{view:"lhh lpR lff"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"bg-transparent q-pa-sm",modelValue:h.mediadrawer,"onUpdate:modelValue":a[0]||(a[0]=e=>h.mediadrawer=e),overlay:"",behavior:"mobile"},{default:(0,l.w5)((()=>[(0,l.Wm)(h["MediaManager"])])),_:1},8,["modelValue"]),(0,l.Wm)(A,{class:"q-ma-sm bg-transparent"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"shadow-0 bg-blue-grey-10 text-white rounded-borders",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l._)("span",i,(0,o.zw)(h.oda.structure.devtime),1),(0,l._)("div",n,[s,(0,l.Wm)(q,{class:"q-ml-xs",size:"xs",color:"pink"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(h.oda.structure.version),1),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:1}),(0,l.Wm)(q,{class:"q-ml-xs",size:"xs",color:"grey"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(h.oda.structure.loaderVersion),1),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[d])),_:1})])),_:1})])])),_:1}),(0,l.Wm)(h["AvanzadaTemplates"]),(0,l.Wm)(M,{icon:"perm_media",size:"md",round:"",flat:"",color:"blue",onClick:a[1]||(a[1]=e=>h.mediadrawer=!h.mediadrawer)}),(0,l.Wm)(M,{icon:"add_circle",size:"md",round:"",flat:"",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(T,{class:"bg-grey-100",onHide:h.updatePreview},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",m,[(0,l.Wm)(h["ModulesPicker"],{onAdd:h.add})])])])),_:1})])),_:1}),(0,l.Wm)(W,{"bg-color":"white",modelValue:h.oda.structure.platform,"onUpdate:modelValue":a[2]||(a[2]=e=>h.oda.structure.platform=e),label:"Plataforma",options:["ASOMATE-ESP","ASOMATE-MAT","RAP-ESP","RAP-MAT","MDA"],dense:"",outlined:"","options-dense":""},null,8,["modelValue"]),p,(0,l.Wm)(M,{icon:"power_settings_new",size:"md",round:"",flat:"",color:"red",onClick:h.reset},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[v])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(H,{class:"window-height"},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l._)("div",w,[(0,l.Wm)(h["ModulesLayers"])]),(0,l._)("div",b,[Object.entries(h.oda.activeModule).length>0?((0,l.wg)(),(0,l.j4)(h["ModuleProperties"],{key:h.oda.activeModule.id})):(0,l.kq)("",!0)]),(0,l._)("div",g,[(0,l.Wm)(h["AvanzadasHTML"])])])])),_:1})])),_:1})])),_:1})}var _=t(60499),y=t(61957);const z={class:"row column full-height bg-blue-grey-1 rounded-borders q-px-xs q-pb-xs"},k={class:"col-grow"},q={class:"row column full-height"},x={class:"row full-width items-center"},M=(0,l._)("div",{class:"col-6 text-caption"},"Vista previa",-1),T={class:"col-6 text-right"},W=(0,l.Uk)("Ver código"),Z=(0,l.Uk)("Responsivo"),A=(0,l.Uk)("Actualizar"),H={class:"col-grow text-center"},Q={class:"col-grow bg-white"};function S(e,a,t,i,n,s){const r=(0,l.up)("q-tooltip"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-toolbar");return(0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",k,[(0,l._)("div",q,[(0,l.Wm)(u,{class:"bg-blue-grey-10 col-1 rounded-borders text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",x,[M,(0,l._)("div",T,[(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-2",icon:i.oda.structure.view?"dvr":"html",onClick:i.changeview,size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[W])),_:1})])),_:1},8,["icon"]),(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-3",icon:"devices",onClick:a[0]||(a[0]=e=>i.responsiveView=!i.responsiveView),size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Z])),_:1})])),_:1}),(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",color:"purple-4",icon:"las la-sync",onClick:i.resync,size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[A])),_:1})])),_:1}),(0,l.Wm)(i["HTML_download"],{onDownloading:a[1]||(a[1]=e=>i.downloading=e),onResync:a[2]||(a[2]=e=>i.resync()),iframe:i.iframe},null,8,["iframe"])])])])),_:1}),(0,l.wy)((0,l._)("div",H,[i.insync?((0,l.wg)(),(0,l.iD)("iframe",{key:0,class:(0,o.C_)(["rounded-borders bg-white",i.responsiveView?"responsiveView full-height q-mx-auto":"fit"]),ref:"iframe",style:{border:"none"}},null,2)):(0,l.kq)("",!0)],512),[[y.F8,!i.oda.structure.view]]),(0,l.wy)((0,l._)("div",Q,[(0,l.Wm)(i["HTML_viewcode"],{"html-modules":i.htmlModules},null,8,["html-modules"])],512),[[y.F8,i.oda.structure.view]])])])])}t(40702);var O=t(37457),P=t(71184),j=t(46420),L=t(24056);const V={setup(e,{expose:a}){a();const t=(0,_.iH)(0),o=(0,_.iH)(!1),i=(0,_.iH)("loading..."),n=(0,l.f3)("EMITTER"),s=(0,_.iH)(null),r=(0,_.iH)(null),d=(0,O.k)(),u=(0,_.iH)(),c=(0,_.iH)(),m=(0,_.iH)(!0),p=(0,_.iH)(!1),v=(0,_.iH)([]),f=()=>{d.structure.view=!d.structure.view},w=async()=>{t.value=r.value.body.scrollTop,d.buildLocations(),m.value=!1,setTimeout((()=>{m.value=!0,setTimeout((()=>{b()}),100)}),100)};n.on("updatePreview",(e=>w()));const b=()=>{const e=d.structure.data.filter((e=>1==e.active));i.value=(0,P.Json2Html)(e),r.value=s.value.contentWindow.document,r.value.body.setAttribute("data",d.structure.platform),r.value.body.setAttribute("class","bg-beige h-full"),y("meta",[["charset","UTF-8"]],!1,r.value.head),y("meta",[["name","viewport"],["content","width=device-width, initial-scale=1.0"]],!1,r.value.head),y("title",[],d.structure.title,r.value.head),u.value=y("div",[["class","mx-auto h-full"],["id","app"]],!1,r.value.body);let a="text/javascript";p.value&&(a="text/test"),y("script",[["src",d.structure.loader],["type",a]],!1,r.value.body),h()},g=e=>{let a=e,t=[];for(const l in a){let e=a[l];if("object"==typeof e){let a="";Object.keys(e).map(((t,l)=>{a+=" "+e[t]})),e=a}t.push([l,e])}return t},h=()=>{c.value=y("div",[],!1,u.value),c.value.innerHTML=i.value,setTimeout((()=>{s.value.contentWindow.scrollTo(0,t.value)}),200)},y=(e,a,t,l)=>{let o=r.value.createElement(e);for(let i of a)o.setAttribute(i[0],i[1]);return t&&(o.innerHTML+=t),l.appendChild(o),o},z=(e,a,t,l)=>{let o=r.value.createElement(e);for(let i of a)o.setAttribute(i[0],i[1]);return t&&t.map(((e,a)=>{let l=t[a];l&&("string"==typeof l?o.innerHTML+=l:l&&null!=l.data&&k(o,l.data))})),v.value.push(o),l.appendChild(o),o},k=(e,a)=>{z(a.tag,g(a.attrs),a.content,e)};(0,l.bv)((()=>{b()}));const q={currentScroll:t,responsiveView:o,htmlModules:i,emitter:n,iframe:s,iDoc:r,oda:d,appcontainer:u,modulescontainer:c,insync:m,downloading:p,htmlbody:v,changeview:f,resync:w,build:b,modulateAttributes:g,buildModules:h,createTag:y,createModule:z,createModuleInside:k,ref:_.iH,onMounted:l.bv,inject:l.f3,useOdaAvanzadaStore:O.k,Json2Html:P.Json2Html,HTML_viewcode:j.Z,HTML_download:L.Z};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}};var C=t(11639),U=t(51663),E=t(24455),D=t(46858),R=t(69984),J=t.n(R);const I=(0,C.Z)(V,[["render",S]]),B=I;J()(V,"components",{QToolbar:U.Z,QBtn:E.Z,QTooltip:D.Z});var F=t(87411),N=t(60001),X=t(50796),Y=t(19302),K=t(82322),$=t(98727),G=t(24409),ee=t(3967);const ae=(0,l.Uk)("Templates"),te=(0,l.Uk)("Avanzada inicial");function le(e,a,t,o,i,n){const s=(0,l.up)("q-tooltip"),r=(0,l.up)("q-item-section"),d=(0,l.up)("q-item"),u=(0,l.up)("q-list"),c=(0,l.up)("q-menu"),m=(0,l.up)("q-btn"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(m,{icon:"dynamic_form",size:"md",round:"",flat:"",color:"green"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[ae])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:""},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(d,{clickable:"",onClick:a[0]||(a[0]=e=>o.loadTemplate("avanzada-inicial"))},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-caption"},{default:(0,l.w5)((()=>[te])),_:1})])),_:1})),[[p]])])),_:1})])),_:1})])),_:1})}var oe=t(96556),ie=t(18910);const ne={props:{},emits:[],setup(e,{expose:a,emit:t}){a();const l=e,o=(0,ie.yj)(),i="/avanzadas"==o.path?(0,O.k)():(0,oe.X)(),n=e=>{let a="";switch(e){case"avanzada-inicial":a='{"platform":"ASOMATE-ESP","data":[{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-start","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{},"content":[],"id":"ComenzarODA","location":"0,0"}],"id":"Comenzar","location":"0"},{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-info","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"title":"","interaction":"drag","class":""},"content":[{"name":"module-audiotext","active":true,"minimize":false,"odatype":"avanzadas","binds":{},"attr":{"text":"","audio":"","v-bind:autoplay":true,"class":""},"content":[],"id":"Instruccion","location":"1,0,0"}],"id":"LaterialInfo","location":"1,0"},{"name":"av-activity","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[],"id":"Actividad","location":"1,1"}],"id":"Escena 1","location":"1"},{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-end","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{},"content":[],"id":"FinalizarODA","location":"2,0"}],"id":"Finalizar","location":"2"}],"view":false,"version":"0.1","loaderVersion":"v1.1.8","loader":"https://cdn.jsdelivr.net/gh/bluemx/blueodasv2@v1.1.8/lib/loader.min.js","mediafiles":[]}';break}i.update(JSON.parse(a)),i.buildLocations()},s={props:l,emit:t,route:o,oda:i,loadTemplate:n,ref:_.iH,useOdaBasicaStore:oe.X,useOdaAvanzadaStore:O.k,useRoute:ie.yj};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};var se=t(56362),re=t(13246),de=t(490),ue=t(76749),ce=t(62146);const me=(0,C.Z)(ne,[["render",le]]),pe=me;J()(ne,"components",{QBtn:E.Z,QTooltip:D.Z,QMenu:se.Z,QList:re.Z,QItem:de.Z,QItemSection:ue.Z}),J()(ne,"directives",{ClosePopup:ce.Z});const ve={setup(e,{expose:a}){a();const t=(0,l.f3)("EMITTER"),o=(0,O.k)(),i=(0,Y.Z)(),n=(0,_.iH)(!1),s=e=>{const a=JSON.parse(JSON.stringify(e));let t=(0,X.Z)().split("-");a.id=Object.keys(o.structure.data).length+t[0],o.structure.data.push(a),o.buildLocations()},r=()=>{t.emit("updatePreview",{})},d=()=>{i.dialog({title:"¿Reiniciar oda?",message:"No se podrá recuperar",cancel:!0}).onOk((()=>{o.reset(),location.reload()}))},u={emitter:t,oda:o,$q:i,mediadrawer:n,add:s,updatePreview:r,reset:d,ref:_.iH,provide:l.JJ,inject:l.f3,nextTick:l.Y3,watch:l.YP,AvanzadasHTML:B,ModulesLayers:F.Z,useOdaAvanzadaStore:O.k,ModulesPicker:N.Z,uid:X.Z,useQuasar:Y.Z,MediaManager:K.Z,ModuleProperties:$.Z,cloneDeep:G.cloneDeep,useRefHistory:ee.x9X,AvanzadaTemplates:pe};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};var fe=t(69885),we=t(20249),be=t(10906),ge=t(16602),he=t(81973),_e=t(20990),ye=t(5698),ze=t(12133);const ke=(0,C.Z)(ve,[["render",h]]),qe=ke;J()(ve,"components",{QPage:fe.Z,QLayout:we.Z,QDrawer:be.Z,QHeader:ge.Z,QToolbar:U.Z,QToolbarTitle:he.Z,QBadge:_e.Z,QTooltip:D.Z,QBtn:E.Z,QMenu:se.Z,QSelect:ye.Z,QPageContainer:ze.Z})}}]);