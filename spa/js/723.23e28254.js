"use strict";(self["webpackChunkblueodasmaker"]=self["webpackChunkblueodasmaker"]||[]).push([[723],{50723:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ke});var l=t(59835),o=t(86970);const i={class:"text-caption text-bold"},n=(0,l.Uk)("Avanzada"),s=(0,l.Uk)("Versión ODAS MAKER"),r=(0,l.Uk)("Versión ODA"),d=(0,l.Uk)("Añadir módulo"),u={style:{width:"300px"}},c={class:"bg-white rounded-borders q-pa-sm q-ma-xs"},m=(0,l._)("div",{class:"row col-grow"},null,-1),p=(0,l.Uk)("Reiniciar"),v={class:"row full-height"},w={class:"col-2 full-height q-py-md q-px-xs"},f={class:"col-3 full-height q-py-md q-px-xs"},b={class:"col full-height q-py-md q-px-xs row column"};function g(e,a,t,g,h,_){const y=(0,l.up)("q-drawer"),z=(0,l.up)("q-tooltip"),k=(0,l.up)("q-badge"),q=(0,l.up)("q-toolbar-title"),M=(0,l.up)("q-btn"),T=(0,l.up)("q-menu"),W=(0,l.up)("q-select"),x=(0,l.up)("q-toolbar"),Z=(0,l.up)("q-header"),A=(0,l.up)("q-page-container"),H=(0,l.up)("q-layout"),Q=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(H,{view:"lhh lpR lff"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"bg-transparent q-pa-sm",modelValue:g.mediadrawer,"onUpdate:modelValue":a[0]||(a[0]=e=>g.mediadrawer=e),overlay:"",behavior:"mobile"},{default:(0,l.w5)((()=>[(0,l.Wm)(g["MediaManager"])])),_:1},8,["modelValue"]),(0,l.Wm)(Z,{class:"q-ma-sm bg-transparent"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"shadow-0 bg-blue-grey-10 text-white rounded-borders",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[n,(0,l.Wm)(k,{class:"q-ml-xs",size:"xs",color:"pink"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(g.oda.structure.version),1),(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:1}),(0,l.Wm)(k,{class:"q-ml-xs",size:"xs",color:"grey"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(g.oda.structure.loaderVersion),1),(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:1})])])),_:1}),(0,l.Wm)(g["AvanzadaTemplates"]),(0,l.Wm)(M,{icon:"perm_media",size:"md",round:"",flat:"",color:"blue",onClick:a[1]||(a[1]=e=>g.mediadrawer=!g.mediadrawer)}),(0,l.Wm)(M,{icon:"add_circle",size:"md",round:"",flat:"",color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(T,{class:"bg-grey-100",onHide:g.updatePreview},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l._)("div",c,[(0,l.Wm)(g["ModulesPicker"],{onAdd:g.add})])])])),_:1})])),_:1}),(0,l.Wm)(W,{"bg-color":"white",modelValue:g.oda.structure.platform,"onUpdate:modelValue":a[2]||(a[2]=e=>g.oda.structure.platform=e),label:"Plataforma",options:["ASOMATE-ESP","ASOMATE-MAT","RAP-ESP","RAP-MAT","MDA"],dense:"",outlined:"","options-dense":""},null,8,["modelValue"]),m,(0,l.Wm)(M,{icon:"power_settings_new",size:"md",round:"",flat:"",color:"red",onClick:g.reset},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[p])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(A,{class:"window-height"},{default:(0,l.w5)((()=>[(0,l._)("div",v,[(0,l._)("div",w,[(0,l.Wm)(g["ModulesLayers"])]),(0,l._)("div",f,[Object.entries(g.oda.activeModule).length>0?((0,l.wg)(),(0,l.j4)(g["ModuleProperties"],{key:g.oda.activeModule.id})):(0,l.kq)("",!0)]),(0,l._)("div",b,[(0,l.Wm)(g["AvanzadasHTML"])])])])),_:1})])),_:1})])),_:1})}var h=t(60499),_=t(61957);const y={class:"row column full-height bg-blue-grey-1 rounded-borders q-px-xs q-pb-xs"},z={class:"col-grow"},k={class:"row column full-height"},q={class:"row full-width items-center"},M=(0,l._)("div",{class:"col-6 text-caption"},"Vista previa",-1),T={class:"col-6 text-right"},W=(0,l.Uk)("Ver código"),x=(0,l.Uk)("Responsivo"),Z=(0,l.Uk)("Actualizar"),A={class:"col-grow text-center"},H={class:"col-grow bg-white"};function Q(e,a,t,i,n,s){const r=(0,l.up)("q-tooltip"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-toolbar");return(0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",z,[(0,l._)("div",k,[(0,l.Wm)(u,{class:"bg-blue-grey-10 col-1 rounded-borders text-white"},{default:(0,l.w5)((()=>[(0,l._)("div",q,[M,(0,l._)("div",T,[(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-2",icon:i.oda.structure.view?"dvr":"html",onClick:i.changeview,size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[W])),_:1})])),_:1},8,["icon"]),(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-3",icon:"devices",onClick:a[0]||(a[0]=e=>i.responsiveView=!i.responsiveView),size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[x])),_:1})])),_:1}),(0,l.Wm)(d,{class:"q-mr-sm",unelevated:"",color:"purple-4",icon:"las la-sync",onClick:i.resync,size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Z])),_:1})])),_:1}),(0,l.Wm)(i["HTML_download"],{onDownloading:a[1]||(a[1]=e=>i.downloading=e),onResync:a[2]||(a[2]=e=>i.resync()),iframe:i.iframe},null,8,["iframe"])])])])),_:1}),(0,l.wy)((0,l._)("div",A,[i.insync?((0,l.wg)(),(0,l.iD)("iframe",{key:0,class:(0,o.C_)(["rounded-borders bg-white",i.responsiveView?"responsiveView full-height q-mx-auto":"fit"]),ref:"iframe",style:{border:"none"}},null,2)):(0,l.kq)("",!0)],512),[[_.F8,!i.oda.structure.view]]),(0,l.wy)((0,l._)("div",H,[(0,l.Wm)(i["HTML_viewcode"],{"html-modules":i.htmlModules},null,8,["html-modules"])],512),[[_.F8,i.oda.structure.view]])])])])}t(40702);var S=t(37457),O=t(71184),P=t(46420),j=t(24056);const V={setup(e,{expose:a}){a();const t=(0,h.iH)(0),o=(0,h.iH)(!1),i=(0,h.iH)("loading..."),n=(0,l.f3)("EMITTER"),s=(0,h.iH)(null),r=(0,h.iH)(null),d=(0,S.k)(),u=(0,h.iH)(),c=(0,h.iH)(),m=(0,h.iH)(!0),p=(0,h.iH)(!1),v=(0,h.iH)([]),w=()=>{d.structure.view=!d.structure.view},f=async()=>{t.value=r.value.body.scrollTop,d.buildLocations(),m.value=!1,setTimeout((()=>{m.value=!0,setTimeout((()=>{b()}),100)}),100)};n.on("updatePreview",(e=>f()));const b=()=>{const e=d.structure.data.filter((e=>1==e.active));i.value=(0,O.Json2Html)(e),r.value=s.value.contentWindow.document,r.value.body.setAttribute("data",d.structure.platform),r.value.body.setAttribute("class","bg-beige h-full"),y("meta",[["charset","UTF-8"]],!1,r.value.head),y("meta",[["name","viewport"],["content","width=device-width, initial-scale=1.0"]],!1,r.value.head),y("title",[],d.structure.title,r.value.head),u.value=y("div",[["class","mx-auto h-full"],["id","app"]],!1,r.value.body);let a="text/javascript";p.value&&(a="text/test"),y("script",[["src",d.structure.loader],["data-loader-version",d.structure.loaderVersion],["type",a]],!1,r.value.body),_()},g=e=>{let a=e,t=[];for(const l in a){let e=a[l];if("object"==typeof e){let a="";Object.keys(e).map(((t,l)=>{a+=" "+e[t]})),e=a}t.push([l,e])}return t},_=()=>{c.value=y("div",[],!1,u.value),c.value.innerHTML=i.value,setTimeout((()=>{s.value.contentWindow.scrollTo(0,t.value)}),200)},y=(e,a,t,l)=>{let o=r.value.createElement(e);for(let i of a)o.setAttribute(i[0],i[1]);return t&&(o.innerHTML+=t),l.appendChild(o),o},z=(e,a,t,l)=>{let o=r.value.createElement(e);for(let i of a)o.setAttribute(i[0],i[1]);return t&&t.map(((e,a)=>{let l=t[a];l&&("string"==typeof l?o.innerHTML+=l:l&&null!=l.data&&k(o,l.data))})),v.value.push(o),l.appendChild(o),o},k=(e,a)=>{z(a.tag,g(a.attrs),a.content,e)};(0,l.bv)((()=>{b()}));const q={currentScroll:t,responsiveView:o,htmlModules:i,emitter:n,iframe:s,iDoc:r,oda:d,appcontainer:u,modulescontainer:c,insync:m,downloading:p,htmlbody:v,changeview:w,resync:f,build:b,modulateAttributes:g,buildModules:_,createTag:y,createModule:z,createModuleInside:k,ref:h.iH,onMounted:l.bv,inject:l.f3,useOdaAvanzadaStore:S.k,Json2Html:O.Json2Html,HTML_viewcode:P.Z,HTML_download:j.Z};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}};var L=t(11639),C=t(51663),U=t(24455),E=t(46858),D=t(69984),R=t.n(D);const J=(0,L.Z)(V,[["render",Q]]),I=J;R()(V,"components",{QToolbar:C.Z,QBtn:U.Z,QTooltip:E.Z});var B=t(87411),F=t(60001),N=t(50796),X=t(19302),K=t(82322),Y=t(43034),$=t(24409),G=t(3967);const ee=(0,l.Uk)("Templates"),ae=(0,l.Uk)("Avanzada inicial");function te(e,a,t,o,i,n){const s=(0,l.up)("q-tooltip"),r=(0,l.up)("q-item-section"),d=(0,l.up)("q-item"),u=(0,l.up)("q-list"),c=(0,l.up)("q-menu"),m=(0,l.up)("q-btn"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(m,{icon:"dynamic_form",size:"md",round:"",flat:"",color:"green"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[ee])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:""},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(d,{clickable:"",onClick:a[0]||(a[0]=e=>o.loadTemplate("avanzada-inicial"))},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-caption"},{default:(0,l.w5)((()=>[ae])),_:1})])),_:1})),[[p]])])),_:1})])),_:1})])),_:1})}var le=t(96556),oe=t(18910);const ie={props:{},emits:[],setup(e,{expose:a,emit:t}){a();const l=e,o=(0,oe.yj)(),i="/avanzadas"==o.path?(0,S.k)():(0,le.X)(),n=e=>{let a="";switch(e){case"avanzada-inicial":a='{"platform":"ASOMATE-ESP","data":[{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-start","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{},"content":[],"id":"ComenzarODA","location":"0,0"}],"id":"Comenzar","location":"0"},{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-info","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"title":"","interaction":"drag","class":""},"content":[{"name":"module-audiotext","active":true,"minimize":false,"odatype":"avanzadas","binds":{},"attr":{"text":"","audio":"","v-bind:autoplay":true,"class":""},"content":[],"id":"Instruccion","location":"1,0,0"}],"id":"LaterialInfo","location":"1,0"},{"name":"av-activity","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[],"id":"Actividad","location":"1,1"}],"id":"Escena 1","location":"1"},{"name":"av-scene","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{"class":""},"content":[{"name":"av-end","odatype":"avanzadas","active":true,"minimize":false,"binds":{},"attr":{},"content":[],"id":"FinalizarODA","location":"2,0"}],"id":"Finalizar","location":"2"}],"view":false,"version":"0.1","loaderVersion":"v1.1.8","loader":"https://cdn.jsdelivr.net/gh/bluemx/blueodasv2@v1.1.8/lib/loader.min.js","mediafiles":[]}';break}i.update(JSON.parse(a)),i.buildLocations()},s={props:l,emit:t,route:o,oda:i,loadTemplate:n,ref:h.iH,useOdaBasicaStore:le.X,useOdaAvanzadaStore:S.k,useRoute:oe.yj};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};var ne=t(56362),se=t(13246),re=t(490),de=t(76749),ue=t(62146);const ce=(0,L.Z)(ie,[["render",te]]),me=ce;R()(ie,"components",{QBtn:U.Z,QTooltip:E.Z,QMenu:ne.Z,QList:se.Z,QItem:re.Z,QItemSection:de.Z}),R()(ie,"directives",{ClosePopup:ue.Z});const pe={setup(e,{expose:a}){a();const t=(0,l.f3)("EMITTER"),o=(0,S.k)(),i=(0,X.Z)(),n=(0,h.iH)(!1),s=e=>{const a=JSON.parse(JSON.stringify(e));let t=(0,N.Z)().split("-");a.id=Object.keys(o.structure.data).length+t[0],o.structure.data.push(a),o.buildLocations()},r=()=>{t.emit("updatePreview",{})},d=()=>{i.dialog({title:"¿Reiniciar oda?",message:"No se podrá recuperar",cancel:!0}).onOk((()=>{o.reset(),location.reload()}))},u={emitter:t,oda:o,$q:i,mediadrawer:n,add:s,updatePreview:r,reset:d,ref:h.iH,provide:l.JJ,inject:l.f3,nextTick:l.Y3,AvanzadasHTML:I,ModulesLayers:B.Z,useOdaAvanzadaStore:S.k,ModulesPicker:F.Z,uid:N.Z,useQuasar:X.Z,MediaManager:K.Z,ModuleProperties:Y.Z,cloneDeep:$.cloneDeep,useRefHistory:G.x9X,AvanzadaTemplates:me};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}};var ve=t(69885),we=t(20249),fe=t(10906),be=t(16602),ge=t(81973),he=t(20990),_e=t(5698),ye=t(12133);const ze=(0,L.Z)(pe,[["render",g]]),ke=ze;R()(pe,"components",{QPage:ve.Z,QLayout:we.Z,QDrawer:fe.Z,QHeader:be.Z,QToolbar:C.Z,QToolbarTitle:ge.Z,QBadge:he.Z,QTooltip:E.Z,QBtn:U.Z,QMenu:ne.Z,QSelect:_e.Z,QPageContainer:ye.Z})}}]);