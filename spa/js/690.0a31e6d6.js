"use strict";(self["webpackChunkblueodasmaker"]=self["webpackChunkblueodasmaker"]||[]).push([[690],{85690:(e,t,l)=>{l.r(t),l.d(t,{default:()=>qe});var a=l(59835),o=l(86970);const r={style:{"font-size":"6px",position:"absolute",top:"2px",left:"2px",color:"#000",opacity:"0.8"}},s={class:"text-caption text-bold"},u=(0,a.Uk)("Basica"),i=(0,a.Uk)("Versión ODAS MAKER"),d=(0,a.Uk)("Versión ODA"),n=(0,a.Uk)("Añadir módulo"),c={style:{width:"300px"}},m={class:"bg-white rounded-borders q-pa-sm q-ma-xs"},p=(0,a.Uk)("Reiniciar"),v={class:"row full-height"},w={class:"col-2 full-height q-py-md q-px-xs"},f={class:"col-3 full-height q-py-md q-px-xs"},b={class:"col full-height q-py-md q-px-xs row column"};function g(e,t,l,g,_,h){const y=(0,a.up)("q-drawer"),q=(0,a.up)("q-tooltip"),M=(0,a.up)("q-badge"),k=(0,a.up)("q-toolbar-title"),W=(0,a.up)("q-btn"),T=(0,a.up)("q-menu"),x=(0,a.up)("q-select"),Z=(0,a.up)("q-toolbar"),H=(0,a.up)("q-header"),S=(0,a.up)("q-page-container"),A=(0,a.up)("q-layout"),V=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{view:"lhh lpR lff"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"bg-transparent q-pa-sm",modelValue:g.mediadrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>g.mediadrawer=e),overlay:"",behavior:"mobile"},{default:(0,a.w5)((()=>[(0,a.Wm)(g["MediaManager"])])),_:1},8,["modelValue"]),(0,a.Wm)(H,{class:"q-ma-sm bg-transparent"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"shadow-0 bg-blue-grey-1 text-dark rounded-borders",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a._)("span",r,(0,o.zw)(g.oda.structure.devtime),1),(0,a._)("div",s,[u,(0,a.Wm)(M,{class:"q-ml-xs",size:"xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(g.oda.structure.version),1),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[i])),_:1})])),_:1}),(0,a.Wm)(M,{class:"q-ml-xs",size:"xs",color:"grey"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(g.oda.structure.loaderVersion),1),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[d])),_:1})])),_:1})])])),_:1}),(0,a.Wm)(W,{icon:"perm_media",size:"md",round:"",flat:"",color:"blue",onClick:t[1]||(t[1]=e=>g.mediadrawer=!g.mediadrawer)}),(0,a.Wm)(W,{icon:"add_circle",size:"md",round:"",flat:"",color:"red"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(T,{class:"bg-grey-100",onHide:g.updatePreview},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",m,[(0,a.Wm)(g["ModulesPicker"],{onAdd:g.add})])])])),_:1})])),_:1}),(0,a.Wm)(x,{"bg-color":"white",modelValue:g.oda.structure.platform,"onUpdate:modelValue":t[2]||(t[2]=e=>g.oda.structure.platform=e),label:"Plataforma",options:["ASOMATE-ESP","ASOMATE-MAT","RAP-ESP","RAP-MAT","MDA"],dense:"",outlined:"","options-dense":""},null,8,["modelValue"]),(0,a.Wm)(g["BasicasFormTitle"]),(0,a.Wm)(W,{icon:"power_settings_new",size:"md",round:"",flat:"",color:"red",onClick:g.reset},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[p])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,{class:"window-height"},{default:(0,a.w5)((()=>[(0,a._)("div",v,[(0,a._)("div",w,[(0,a.Wm)(g["ModulesLayers"])]),(0,a._)("div",f,[Object.entries(g.oda.activeModule).length>0?((0,a.wg)(),(0,a.j4)(g["ModuleProperties"],{key:g.oda.activeModule.id})):(0,a.kq)("",!0)]),(0,a._)("div",b,[(0,a.Wm)(g["BasicasHTML"])])])])),_:1})])),_:1})])),_:1})}var _=l(60499),h=l(61957);const y={class:"row column full-height bg-blue-grey-1 rounded-borders q-px-xs q-pb-xs"},q={class:"col-grow"},M={class:"row column full-height"},k={class:"row full-width items-center"},W=(0,a._)("div",{class:"col-6"},"Vista previa",-1),T={class:"col-6 text-right"},x=(0,a.Uk)("Ver código"),Z=(0,a.Uk)("Responsivo"),H=(0,a.Uk)("Actualizar"),S={class:"col-grow text-center"},A={class:"col-grow bg-white"};function V(e,t,l,r,s,u){const i=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn"),n=(0,a.up)("q-toolbar");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",q,[(0,a._)("div",M,[(0,a.Wm)(n,{class:"bg-blue-grey-1 col-1 rounded-borders"},{default:(0,a.w5)((()=>[(0,a._)("div",k,[W,(0,a._)("div",T,[(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-6",icon:r.oda.structure.view?"dvr":"html",onClick:r.changeview,size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[x])),_:1})])),_:1},8,["icon"]),(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",flat:"",color:"purple-8",icon:"devices",onClick:t[0]||(t[0]=e=>r.responsiveView=!r.responsiveView),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[Z])),_:1})])),_:1}),(0,a.Wm)(d,{class:"q-mr-sm",unelevated:"",color:"purple-6",icon:"las la-sync",onClick:r.resync,size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[H])),_:1})])),_:1}),(0,a.Wm)(r["HTML_download"],{onDownloading:t[1]||(t[1]=e=>r.downloading=e),onResync:t[2]||(t[2]=e=>r.resync()),iframe:r.iframe},null,8,["iframe"])])])])),_:1}),(0,a.wy)((0,a._)("div",S,[r.insync?((0,a.wg)(),(0,a.iD)("iframe",{key:0,class:(0,o.C_)(["rounded-borders bg-white",r.responsiveView?"responsiveView full-height q-mx-auto":"fit"]),ref:"iframe",style:{border:"none"}},null,2)):(0,a.kq)("",!0)],512),[[h.F8,!r.oda.structure.view]]),(0,a.wy)((0,a._)("div",A,[(0,a.Wm)(r["HTML_viewcode"],{"html-modules":r.htmlModules},null,8,["html-modules"])],512),[[h.F8,r.oda.structure.view]])])])])}l(40702);var O=l(96556),Q=l(37457),P=l(18910),z=l(71184),j=l(46420),U=l(24056);const L={setup(e,{expose:t}){t();const l=(0,_.iH)(0),o=(0,_.iH)(!1),r=(0,_.iH)("loading..."),s=(0,a.f3)("EMITTER"),u=(0,_.iH)(null),i=(0,_.iH)(null),d=(0,O.X)(),n=(0,_.iH)(),c=(0,_.iH)(),m=(0,_.iH)(!0),p=(0,_.iH)(!1),v=(0,_.iH)([]),w=()=>{d.structure.view=!d.structure.view},f=async()=>{l.value=i.value.body.scrollTop,d.buildLocations(),m.value=!1,setTimeout((()=>{m.value=!0,setTimeout((()=>{b()}),100)}),100)};s.on("updatePreview",(e=>f()));const b=()=>{const e=d.structure.data.filter((e=>1==e.active));r.value=(0,z.Json2Html)(e),i.value=u.value.contentWindow.document,i.value.body.setAttribute("data",d.structure.platform),y("meta",[["charset","UTF-8"]],!1,i.value.head),y("meta",[["name","viewport"],["content","width=device-width, initial-scale=1.0"]],!1,i.value.head),y("title",[],d.structure.title,i.value.head),n.value=y("div",[["class","container mx-auto my-5"],["id","app"]],!1,i.value.body);let t="text/javascript";p.value&&(t="text/test"),y("script",[["src",d.structure.loader],["type",t]],!1,i.value.body),h()},g=e=>{let t=e,l=[];for(const a in t){let e=t[a];if("object"==typeof e){let t="";Object.keys(e).map(((l,a)=>{t+=" "+e[l]})),e=t}l.push([a,e])}return l},h=()=>{y("oda-titulo",[["title",d.structure.title],["subtitle",d.structure.subtitle]],!1,n.value),c.value=y("div",[],!1,n.value),c.value.innerHTML=r.value,y("oda-finalizar",[],!1,n.value),setTimeout((()=>{u.value.contentWindow.scrollTo(0,l.value)}),200)},y=(e,t,l,a)=>{let o=i.value.createElement(e);for(let r of t)o.setAttribute(r[0],r[1]);return l&&(o.innerHTML+=l),a.appendChild(o),o},q=(e,t,l,a)=>{let o=i.value.createElement(e);for(let r of t)o.setAttribute(r[0],r[1]);return l&&l.map(((e,t)=>{let a=l[t];a&&("string"==typeof a?o.innerHTML+=a:a&&null!=a.data&&M(o,a.data))})),v.value.push(o),a.appendChild(o),o},M=(e,t)=>{q(t.tag,g(t.attrs),t.content,e)};(0,a.bv)((()=>{b()}));const k={currentScroll:l,responsiveView:o,htmlModules:r,emitter:s,iframe:u,iDoc:i,oda:d,appcontainer:n,modulescontainer:c,insync:m,downloading:p,htmlbody:v,changeview:w,resync:f,build:b,modulateAttributes:g,buildModules:h,createTag:y,createModule:q,createModuleInside:M,ref:_.iH,onMounted:a.bv,inject:a.f3,useOdaBasicaStore:O.X,useOdaAvanzadaStore:Q.k,useRoute:P.yj,Json2Html:z.Json2Html,HTML_viewcode:j.Z,HTML_download:U.Z};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}};var R=l(11639),B=l(51663),C=l(24455),D=l(46858),E=l(69984),J=l.n(E);const X=(0,R.Z)(L,[["render",V]]),F=X;J()(L,"components",{QToolbar:B.Z,QBtn:C.Z,QTooltip:D.Z});const I={class:"row col-grow"},N={class:"col-grow"},G={class:"col-grow"};function K(e,t,l,o,r,s){const u=(0,a.up)("q-input");return(0,a.wg)(),(0,a.iD)("div",I,[(0,a._)("div",N,[(0,a.Wm)(u,{modelValue:o.oda.structure.title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.oda.structure.title=e),label:"Título",dense:"",outlined:""},null,8,["modelValue"])]),(0,a._)("div",G,[(0,a.Wm)(u,{modelValue:o.oda.structure.subtitle,"onUpdate:modelValue":t[1]||(t[1]=e=>o.oda.structure.subtitle=e),label:"Subtítulo",dense:"",outlined:""},null,8,["modelValue"])])])}const Y={setup(e,{expose:t}){t();const l=(0,O.X)(),o={oda:l,useOdaBasicaStore:O.X,useOdaAvanzadaStore:Q.k,useRoute:P.yj,ref:_.iH,onMounted:a.bv,inject:a.f3};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};var $=l(5698),ee=l(66611);const te=(0,R.Z)(Y,[["render",K]]),le=te;J()(Y,"components",{QSelect:$.Z,QInput:ee.Z});var ae=l(87411),oe=l(60001),re=l(50796),se=l(19302),ue=l(82322),ie=l(98727),de=l(24409),ne=l(3967);const ce={setup(e,{expose:t}){t();const l=(0,a.f3)("EMITTER"),o=(0,O.X)(),r=(0,se.Z)(),s=(0,_.iH)(!1),u=e=>{const t=JSON.parse(JSON.stringify(e));let l=(0,re.Z)().split("-");t.id=Object.keys(o.structure.data).length+l[0],o.structure.data.push(t),o.buildLocations()},i=()=>{l.emit("updatePreview",{})},d=()=>{r.dialog({title:"¿Reiniciar oda?",message:"No se podrá recuperar",cancel:!0}).onOk((()=>{o.reset(),location.reload()}))},n={emitter:l,oda:o,$q:r,mediadrawer:s,add:u,updatePreview:i,reset:d,ref:_.iH,provide:a.JJ,inject:a.f3,nextTick:a.Y3,BasicasHTML:F,BasicasFormTitle:le,ModulesLayers:ae.Z,useOdaBasicaStore:O.X,useOdaAvanzadaStore:Q.k,useRoute:P.yj,ModulesPicker:oe.Z,uid:re.Z,useQuasar:se.Z,MediaManager:ue.Z,ModuleProperties:ie.Z,cloneDeep:de.cloneDeep,useRefHistory:ne.x9X};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}};var me=l(69885),pe=l(20249),ve=l(10906),we=l(16602),fe=l(81973),be=l(20990),ge=l(67236),_e=l(56362),he=l(12133);const ye=(0,R.Z)(ce,[["render",g]]),qe=ye;J()(ce,"components",{QPage:me.Z,QLayout:pe.Z,QDrawer:ve.Z,QHeader:we.Z,QToolbar:B.Z,QToolbarTitle:fe.Z,QBadge:be.Z,QTooltip:D.Z,QBtnGroup:ge.Z,QBtn:C.Z,QMenu:_e.Z,QSelect:$.Z,QPageContainer:he.Z})}}]);